{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SAMEER_KUMAR_PANDA\\\\SchEdu\\\\frontend\\\\src\\\\pages\\\\TeacherLeave.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Container, Typography, TextField, Button, Alert, Box } from '@mui/material';\nimport { DatePicker } from '@mui/lab';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TeacherLeave = () => {\n  _s();\n  const [weekStartDate, setWeekStartDate] = useState(null);\n  const [daysApplied, setDaysApplied] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const validateForm = () => {\n    if (!weekStartDate) {\n      setError('Please select the start date of the week.');\n      return false;\n    }\n    if (!daysApplied) {\n      setError('Please enter number of leave days.');\n      return false;\n    }\n    if (daysApplied < 1 || daysApplied > 2) {\n      setError('You can apply for 1 or 2 leave days only.');\n      return false;\n    }\n    return true;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (!validateForm()) return;\n    try {\n      const API = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n      const response = await fetch(`${API}/leaves`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          // Map UI fields to API fields\n          teacher_id: Number(localStorage.getItem('user_id')) || 0,\n          leave_type: 'casual',\n          start_date: weekStartDate.toISOString().split('T')[0],\n          end_date: weekStartDate.toISOString().split('T')[0],\n          reason: `Auto-submitted ${Number(daysApplied)} day(s)`\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        setError(data.message || 'Failed to apply for leave.');\n      } else {\n        setSuccess('Leave applied successfully and automatically approved.');\n        setWeekStartDate(null);\n        setDaysApplied('');\n      }\n    } catch (e) {\n      setError('Network error. Please try again later.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    sx: {\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      children: \"Apply for Leave\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      sx: {\n        mb: 2\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      onSubmit: handleSubmit,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n        label: \"Week Start Date\",\n        value: weekStartDate,\n        onChange: newValue => setWeekStartDate(newValue),\n        renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          ...params,\n          margin: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Days Applied\",\n        type: \"number\",\n        inputProps: {\n          min: 1,\n          max: 2\n        },\n        value: daysApplied,\n        onChange: e => setDaysApplied(e.target.value),\n        fullWidth: true,\n        margin: \"normal\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        color: \"textSecondary\",\n        sx: {\n          mb: 1\n        },\n        children: \"You can apply for up to 2 leave days per week. Leave requests within limits are automatically approved.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\",\n        fullWidth: true,\n        sx: {\n          mt: 2\n        },\n        children: \"Submit Leave Application\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(TeacherLeave, \"frebN6Esy8IIhl5zfwoqI+wCsLg=\");\n_c = TeacherLeave;\nexport default TeacherLeave;\nvar _c;\n$RefreshReg$(_c, \"TeacherLeave\");","map":{"version":3,"names":["React","useState","Container","Typography","TextField","Button","Alert","Box","DatePicker","jsxDEV","_jsxDEV","TeacherLeave","_s","weekStartDate","setWeekStartDate","daysApplied","setDaysApplied","error","setError","success","setSuccess","validateForm","handleSubmit","e","preventDefault","API","process","env","REACT_APP_API_URL","response","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","teacher_id","Number","leave_type","start_date","toISOString","split","end_date","reason","data","json","ok","message","maxWidth","sx","mt","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","severity","mb","component","onSubmit","noValidate","label","value","onChange","newValue","renderInput","params","fullWidth","margin","type","inputProps","min","max","target","required","color","_c","$RefreshReg$"],"sources":["C:/Users/SAMEER_KUMAR_PANDA/SchEdu/frontend/src/pages/TeacherLeave.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Alert,\r\n  Box\r\n} from '@mui/material';\r\nimport { DatePicker } from '@mui/lab';\r\n\r\nconst TeacherLeave = () => {\r\n  const [weekStartDate, setWeekStartDate] = useState(null);\r\n  const [daysApplied, setDaysApplied] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const validateForm = () => {\r\n    if (!weekStartDate) {\r\n      setError('Please select the start date of the week.');\r\n      return false;\r\n    }\r\n    if (!daysApplied) {\r\n      setError('Please enter number of leave days.');\r\n      return false;\r\n    }\r\n    if (daysApplied < 1 || daysApplied > 2) {\r\n      setError('You can apply for 1 or 2 leave days only.');\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    if (!validateForm()) return;\r\n\r\n      try {\r\n        const API = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\n        const response = await fetch(`${API}/leaves`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n          body: JSON.stringify({\r\n            // Map UI fields to API fields\r\n            teacher_id: Number(localStorage.getItem('user_id')) || 0,\r\n            leave_type: 'casual',\r\n            start_date: weekStartDate.toISOString().split('T')[0],\r\n            end_date: weekStartDate.toISOString().split('T')[0],\r\n            reason: `Auto-submitted ${Number(daysApplied)} day(s)`,\r\n          }),\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!response.ok) {\r\n          setError(data.message || 'Failed to apply for leave.');\r\n        } else {\r\n          setSuccess('Leave applied successfully and automatically approved.');\r\n          setWeekStartDate(null);\r\n          setDaysApplied('');\r\n        }\r\n      } catch (e) {\r\n        setError('Network error. Please try again later.');\r\n      }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" sx={{ mt: 4 }}>\r\n      <Typography variant=\"h5\" gutterBottom>\r\n        Apply for Leave\r\n      </Typography>\r\n\r\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\r\n      {success && <Alert severity=\"success\" sx={{ mb: 2 }}>{success}</Alert>}\r\n\r\n      <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n        <DatePicker\r\n          label=\"Week Start Date\"\r\n          value={weekStartDate}\r\n          onChange={(newValue) => setWeekStartDate(newValue)}\r\n          renderInput={(params) => <TextField fullWidth {...params} margin=\"normal\" />}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Days Applied\"\r\n          type=\"number\"\r\n          inputProps={{ min: 1, max: 2 }}\r\n          value={daysApplied}\r\n          onChange={(e) => setDaysApplied(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          required\r\n        />\r\n\r\n        <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mb: 1 }}>\r\n          You can apply for up to 2 leave days per week. Leave requests within limits are automatically approved.\r\n        </Typography>\r\n\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth sx={{ mt: 2 }}>\r\n          Submit Leave Application\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TeacherLeave;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}