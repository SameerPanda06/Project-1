{"ast":null,"code":"import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Login from'./pages/Login';import AdminDashboard from'./pages/AdminDashboard';import AdminSchedule from'./pages/AdminSchedule';import AdminNotifications from'./pages/AdminNotifications';import AdminProfile from'./pages/AdminProfile';import TeacherDashboard from'./pages/TeacherDashboard';import TeacherSchedule from'./pages/TeacherSchedule';import TeacherNotifications from'./pages/TeacherNotifications';import TeacherProfile from'./pages/TeacherProfile';import TeacherLeave from'./pages/TeacherLeave';import TeacherLeaveHistory from'./pages/TeacherLeaveHistory';import StudentDashboard from'./pages/StudentDashboard';import StudentTimetable from'./pages/StudentTimetable';import StudentNotifications from'./pages/StudentNotifications';import StudentProfile from'./pages/StudentProfile';import ProtectedRoute from'./components/ProtectedRoute';import{getToken,getRole}from'./services/authService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// State to hold user role after login/token parse\nconst[userRole,setUserRole]=useState(null);// On mount, try to get role from localStorage (set after login)\nuseEffect(()=>{const role=getRole();// get role from authService/localStorage\nif(role){setUserRole(role);}},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setUserRole:setUserRole})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/schedule\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AdminSchedule,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/notifications\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AdminNotifications,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AdminProfile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['teacher'],children:/*#__PURE__*/_jsx(TeacherDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher/schedule\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['teacher'],children:/*#__PURE__*/_jsx(TeacherSchedule,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher/notifications\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['teacher'],children:/*#__PURE__*/_jsx(TeacherNotifications,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher/profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['teacher'],children:/*#__PURE__*/_jsx(TeacherProfile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher/leave\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['teacher'],children:/*#__PURE__*/_jsx(TeacherLeave,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher/leave/history\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['teacher'],children:/*#__PURE__*/_jsx(TeacherLeaveHistory,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/student/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['student'],children:/*#__PURE__*/_jsx(StudentDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/student/timetable\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['student'],children:/*#__PURE__*/_jsx(StudentTimetable,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/student/notifications\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['student'],children:/*#__PURE__*/_jsx(StudentNotifications,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/student/profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['student'],children:/*#__PURE__*/_jsx(StudentProfile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Router","Routes","Route","Navigate","Login","AdminDashboard","AdminSchedule","AdminNotifications","AdminProfile","TeacherDashboard","TeacherSchedule","TeacherNotifications","TeacherProfile","TeacherLeave","TeacherLeaveHistory","StudentDashboard","StudentTimetable","StudentNotifications","StudentProfile","ProtectedRoute","getToken","getRole","jsx","_jsx","jsxs","_jsxs","App","userRole","setUserRole","role","children","path","element","allowedRoles","to","replace"],"sources":["C:/Users/SAMEER_KUMAR_PANDA/SchEdu/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\n\nimport Login from './pages/Login';\n\nimport AdminDashboard from './pages/AdminDashboard';\nimport AdminSchedule from './pages/AdminSchedule';\nimport AdminNotifications from './pages/AdminNotifications';\nimport AdminProfile from './pages/AdminProfile';\n\nimport TeacherDashboard from './pages/TeacherDashboard';\nimport TeacherSchedule from './pages/TeacherSchedule';\nimport TeacherNotifications from './pages/TeacherNotifications';\nimport TeacherProfile from './pages/TeacherProfile';\nimport TeacherLeave from './pages/TeacherLeave';\nimport TeacherLeaveHistory from './pages/TeacherLeaveHistory';\n\nimport StudentDashboard from './pages/StudentDashboard';\nimport StudentTimetable from './pages/StudentTimetable';\nimport StudentNotifications from './pages/StudentNotifications';\nimport StudentProfile from './pages/StudentProfile';\n\nimport ProtectedRoute from './components/ProtectedRoute';\nimport { getToken, getRole } from './services/authService';\n\nfunction App() {\n  // State to hold user role after login/token parse\n  const [userRole, setUserRole] = useState(null);\n\n  // On mount, try to get role from localStorage (set after login)\n  useEffect(() => {\n    const role = getRole(); // get role from authService/localStorage\n    if (role) {\n      setUserRole(role);\n    }\n  }, []);\n\n  return (\n    <Router>\n      <Routes>\n        {/* Public route */}\n        <Route path=\"/login\" element={<Login setUserRole={setUserRole} />} />\n\n        {/* Admin routes */}\n        <Route\n          path=\"/admin/dashboard\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['admin']}>\n              <AdminDashboard />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/admin/schedule\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['admin']}>\n              <AdminSchedule />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/admin/notifications\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['admin']}>\n              <AdminNotifications />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/admin/profile\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['admin']}>\n              <AdminProfile />\n            </ProtectedRoute>\n          }\n        />\n\n        {/* Teacher routes */}\n        <Route\n          path=\"/teacher/dashboard\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['teacher']}>\n              <TeacherDashboard />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/teacher/schedule\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['teacher']}>\n              <TeacherSchedule />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/teacher/notifications\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['teacher']}>\n              <TeacherNotifications />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/teacher/profile\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['teacher']}>\n              <TeacherProfile />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/teacher/leave\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['teacher']}>\n              <TeacherLeave />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/teacher/leave/history\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['teacher']}>\n              <TeacherLeaveHistory />\n            </ProtectedRoute>\n          }\n        />\n\n        {/* Student routes */}\n        <Route\n          path=\"/student/dashboard\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['student']}>\n              <StudentDashboard />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/student/timetable\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['student']}>\n              <StudentTimetable />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/student/notifications\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['student']}>\n              <StudentNotifications />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/student/profile\"\n          element={\n            <ProtectedRoute userRole={userRole} allowedRoles={['student']}>\n              <StudentProfile />\n            </ProtectedRoute>\n          }\n        />\n\n        {/* Default fallback */}\n        <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}